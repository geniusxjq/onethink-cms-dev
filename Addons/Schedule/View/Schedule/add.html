<extend name="Public/base" />

<block name="style">
<link href="__ADDONROOT__/css/base.css" rel="stylesheet" type="text/css">
<php>
if(C('COLOR_STYLE')=='blue_color'){
echo '<link href="__STATIC__/bootstrap/2.x/lib/datetimepicker/css/datetimepicker_blue.css" rel="stylesheet" type="text/css">';
}else{
echo '<link href="__STATIC__/bootstrap/2.x/lib/datetimepicker/css/datetimepicker.css" rel="stylesheet" type="text/css">';
}
</php>
<link href="__STATIC__/bootstrap/2.x/lib/datetimepicker/css/dropdown.css" rel="stylesheet" type="text/css">
</block>

<block name="body">
	<div class="main-title cf">
		<h2>新增计划</h2>
	</div>

	<!-- 标签页导航 -->
	<div class="tab-wrap">
		<div class="tab-content">
			<!-- 表单 -->
			<form id="form" action="{:addons_url('Schedule://Schedule/add')}" method="post" class="form-horizontal doc-modal-form">
				<!-- 基础 -->
				<div id="tab1" class="tab-pane in tab1">
					<div class="form-item cf">
						<label class="item-label">执行函数<span class="check-tips">（计划任务执行的函数，格式为：app/Model/method）</span></label>
						<div class="controls">
							<input type="text" class="text input-large" name="task_to_run" value="">
						</div>
					</div>
                    	<div class="form-item cf">
						<label class="item-label">开始时间 -- 结束时间<span class="check-tips">（任务启止时间。格式如：2015-02-09 21:50:00 ）</span></label>
						<div class="controls">
							<input type="text"  id="start_datetime" class="text input-mid" name="start_datetime" value=""> -- <input type="text"  id="end_datetime" class="text input-mid " name="end_datetime" value="">
						</div>
					</div>
					<div class="form-item cf">
						<label class="item-label">任务周期（类型）<span class="check-tips">（只执行一次，按分钟执行，按小时执行，按天执行，按周执行，按月执行。之一）</span></label>
						<div class="controls">	
                            <select name="schedule_type">
                            <option value="ONCE" selected="selected">只执行一次</option>
                            <option value="MINUTE">按分钟执行</option>
                            <option value="HOURLY">按小时执行</option>
                            <option value="DAILY">按天执行</option>
                            <option value="WEEKLY">按周执行</option>
                            <option value="MONTHLY">按月执行</option>
                            </select>
						</div>
					</div>
					<div class="form-item cf">
						<label class="item-label">执行频率<span class="check-tips">（一个周期内执行任务的次数。类型为“按月执行“时必须，为“只执行一次“时无效；其他时为可选，默认为1次）</span></label>
						<div class="controls">
							<input type="text" class="text input-large" name="modifier" value="">
						</div>
					</div>
					<div class="form-item cf">
						<label class="item-label">指定周或月的一天或多天[dirlist]<span class="check-tips">（指定周或月的一天或多天。只与”按周执行“或”按月执行“共同使用时有效，其他时忽略。）</span></label>
						<div class="controls">
							<input type="text" class="text input-large" name="dirlist" value="">
						</div>
					</div>
                    
					<div class="form-item cf">
                    
						<label class="item-label">
                        指定一年中的一个月或多个月[month]
                        <span class="check-tips">
                        (指定一年中的一个月或多个月.只在”按月执行“时有效，其他时忽略。当modifier=LASTDAY时必须，其他时可选。有效值：Jan-Dec，默认为每个月)
                        </span>
                        </label>
						&nbsp; 
                       <div class="date_month_box">
                           <span> 
                             <label><input class="check-all" type="checkbox"><font>每月</font></label>
                             <label><input class="ids" type="checkbox" name="month[]" value="Jan" ><font>一月</font></label>
                             <label><input class="ids" type="checkbox" name="month[]" value="Feb" ><font>二月</font></label>
                              <label><input class="ids" type="checkbox" name="month[]" value="Mar" ><font>三月</font></label>
                               <label><input class="ids" type="checkbox" name="month[]" value="Apr" ><font>四月</font></label>
                              <label><input class="ids" type="checkbox" name="month[]" value="May" ><font>五月</font></label>
                              <label><input class="ids" type="checkbox" name="month[]" value="Jun" ><font>六月</font></label>
                               <label><input class="ids" type="checkbox" name="month[]" value="Jul" ><font>七月</font></label>
                               <label><input class="ids" type="checkbox" name="month[]" value="Aug" ><font>八月</font></label>
                                <label><input class="ids" type="checkbox" name="month[]" value="Sep" ><font>九月</font></label>
                               <label><input class="ids" type="checkbox" name="month[]" value="Oct" ><font>十月</font></label>
                                <label><input class="ids" type="checkbox" name="month[]" value="Nov" ><font>十一月</font></label>
                                <label><input class="ids" type="checkbox" name="month[]" value="Dec" ><font>十二月</font></label>
                              
                           </span>
                       </div>
                        
                      </div>
   
					<div class="form-item cf">
						<label class="item-label">简介<span class="check-tips">（对计划任务的简要描述）</span></label>
						<div class="controls">
							<input type="text" class="text input-large" name="info" value="">
						</div>
					</div>																														

				</div>

				<!-- 按钮 -->
				<div class="form-item cf">
					<label class="item-label"></label>
					<div class="controls edit_sort_btn">
						<button class="btn submit-btn ajax-post no-refresh" type="submit" target-form="form-horizontal">确 定</button>
						<a class="btn btn-return" href="{:U('addons/adminlist',array('name'=>Schedule))}">返 回</a>
					</div>
				</div>
			</form>
		</div>
	</div>
</block>
<block name="script">
<script type="text/javascript" src="__STATIC__/bootstrap/2.x/lib/datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="__STATIC__/bootstrap/2.x/lib/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
<script type="text/javascript" charset="utf-8">

$(function(){
							  
    $('#start_datetime').datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        language:"zh-CN",
        minView:2,
        autoclose:true
    });
	
    $('#end_datetime').datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        language:"zh-CN",
        minView:2,
        autoclose:true
    });
	$('input[type=checkbox]').click(function(){
										  
	$("input[type=checkbox]:checked").attr('checked','checked');
	
	});
				
});

</script>
</block>

